<!DOCTYPE html>
<meta http-equiv="Access-Control-Allow-Origin" content="*" />
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<div id="chart1" style="width: 300px; height: 300px;"></div>
		<div id="chart2" style="width: 300px; height: 300px;"></div>
		<div id="chart3" style="width: 300px; height: 300px;"></div>
		<div id="chart4" style="width: 300px; height: 300px;"></div>
		<div id="chart5" style="width: 300px; height: 300px;"></div>
		<script src="js/echarts.min.js"></script>
		<script src="js/jquery.min.js"></script>
		<script>
			var option1 = {
				title:{
					text:'工作效率',
					textStyle:{
						color:'##6A5ACD',
						textBorderColor:'#483D8B',
					}
				},
				tooltip:{
					show:true,
					trigger:'axis',
				},
				
				legend:{
					name:'可视化图表',
					x:'right',
					y:'top',
				},
//				toolbox:{
//					show:true,
//					feature:{
//						mark:{show:true},
//						magicType:{show:true,type:['bar','line']},
//						saveAsImage:{show:true},
//						restore:{show:true},
//					}
//				},
				xAxis:[
					{
						show:true,
						type:'category',
						data:[],
					}
				],
				yAxis:[
					{
						type:'value',
					}
				],
				series:[
					{
						name:"可视化图表",
						type:'bar',
						data:[],
						itemStyle:{
							color:"#8FBC8F",
						},
						markLine:{
							data:[
								{
									name:'标准线',
									yAxis:10,
								}
							]
							
						},
					}
				],
			};
			var myChart = echarts.init(document.getElementById('chart1'));
			myChart.setOption(option1);
			alert("1");
		myChart.showLoading();
	    var names=[]; 
        var nums=[];  
        alert("2");
        $.ajax({
         type : "GET",
         url : "http://192.168.20.168:8080//test",    //请求发送到TestServlet处
         data : {},
         dataType : "jsonp",        //返回数据形式为json
         jsonpCallback:"callback",
         success : function(result) {
         	alert("test1");
         	           //请求成功时执行该函数内容，result即为服务器返回的json对象
             if (result) {
             	alert("test2");
                    for(var i=0;i<result.length;i++){       
                       names.push(result[i].name);    //挨个取出类别并填入类别数组
                     }
                    for(var i=0;i<result.length;i++){       
                        nums.push(result[i].num);    //挨个取出销量并填入销量数组
                      }
                    alert("test3");
                    myChart.hideLoading();    //隐藏加载动画
                    myChart.setOption({        //加载数据图表
                        xAxis: {
                            data: names
                        },
                        series: [{
                            // 根据名字对应到相应的系列
                            name: '销量',
                            data: nums
                        }],
                    });
                    
             }
         
       		 }
         })
	</script>
	</body>
</html>
